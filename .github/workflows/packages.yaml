# DO NOT EDIT!  This file was automatically generated.
# Generated at: 2022-01-14T17:20:01.336347
# Generated by: '.github/workflows/generate-workflow' '.github/workflows/packages.yaml'

{"name": "Build Python Packages", "on": {"push": {"tags": ["v*"]}, "pull_request": {}}, "jobs": {"check-workflow": {"name": "Check Github Actions Workflow Configuration", "container": {"image": "python:3.7-slim"}, "runs-on": "ubuntu-latest", "steps": [{"name": "Checkout Source", "uses": "actions/checkout@v2"}, {"name": "Check", "run": "pip install pyyaml\nif ./.github/workflows/generate-workflow ./.github/workflows/packages.yaml; then\n  echo \"Workflow configuration is not up to date with template!\"\n  exit 1\nfi\n"}]}, "windows-packages": {"name": "Build Windows Packages", "needs": ["check-workflow"], "strategy": {"matrix": {"os": ["windows-latest"], "python-version": ["pypy3"]}}, "runs-on": "${{ matrix.os }}", "steps": [{"run": "git config --global core.autocrlf false"}, {"uses": "actions/checkout@9a3a9ade8222dcdf9d3c77710b10df47ee7c7c89", "with": {"fetch-depth": 0, "submodules": "recursive"}}, {"name": "Finish Checkout", "run": "# We need tags to compute a version number.\ngit fetch --tags\n"}, {"name": "Get Packaging Dependencies", "run": "pip install build twine\n"}, {"name": "Build Packages", "run": "python -m build\n"}, {"name": "Upload Packages", "env": {"TWINE_USERNAME": "__token__", "TWINE_PASSWORD": "${{ secrets.exarkun_pypi_api_key }}"}, "run": "python -m twine upload --repository pypi dist/*.whl\n"}]}, "manylinux2010-packages": {"name": "Build manylinux2010 Packages", "needs": ["check-workflow"], "strategy": {"matrix": {"os": ["ubuntu-18.04"], "python-version": ["pypy3"]}}, "runs-on": "${{ matrix.os }}", "steps": [{"uses": "actions/checkout@9a3a9ade8222dcdf9d3c77710b10df47ee7c7c89", "with": {"fetch-depth": 0, "submodules": "recursive"}}, {"name": "Finish Checkout", "run": "# We need tags to compute a version number.\ngit fetch --tags\n"}, {"name": "Get Packaging Dependencies", "run": "pip install build twine\n"}, {"name": "Build a binary wheel and a source tarball", "uses": "LeastAuthority/python-wheels-manylinux-build@master", "with": {"python-versions": "cp37-cp37m", "install-extra-requirements": ".github/workflows/install-rust.sh"}}, {"name": "Put packages where they can be found", "run": "mkdir -p dist\ncp wheelhouse/*manylinux2010*.whl dist/\n"}, {"name": "Upload Packages", "env": {"TWINE_USERNAME": "__token__", "TWINE_PASSWORD": "${{ secrets.exarkun_pypi_api_key }}"}, "run": "python -m twine upload --repository pypi dist/*.whl\n"}]}}}